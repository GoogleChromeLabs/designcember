---
---

<style>
  .theme-toggle-container {
    --sky-blue: #a8dbe2;

    position: sticky;
    justify-self: flex-end;
    top: var(--size-3);
    contain: paint;
    z-index: 2;
    background-color: var(--sky-blue);
    width: var(--size-9);
    border-radius: var( --size-8) 0 0 var(--size-8);
    transition: transform 0.25s cubic-bezier(0,1.5,.8,1.2);

    @media (pointer: coarse) {
      width: var(--size-8);
      transform: translateY(-0.5rem);
    }

    @media (pointer: fine) {
      &:hover,
      &:focus {
        transform: translateX(0.25rem);
      }
    }

    @media (--md) {
      width: 4rem;
    }

    @media print {
      display: none;
    }
  }

  .theme-toggle {
    background: white;
    border-radius: var(--radius-round);
    aspect-ratio: var(--ratio-box);
    margin: var(--size-1);
    padding: var(--size-2);

    @media (--lg) {
      margin: var(--size-2);
    }
  }

  #moon, #sun {
    fill: var(--nav-icon);
    stroke: none;

    @nest :hover > svg > & {
      fill: var(--nav-icon-hover);
    }
  }

  #sun {
    transition: transform .5s var(--ease-4);
    transform-origin: center center;
  }

  #sun-beams {
    --_opacity-dur: .15s;
    stroke: var(--nav-icon);
    stroke-width: 2px;
    transform-origin: center center;
    transition:
      transform .5s var(--ease-elastic-4),
      opacity var(--_opacity-dur) var(--ease-4);

    @nest :hover > svg > & {
      stroke: var(--nav-icon-hover);
    }
  }

  #moon > circle {
    transition: transform .5s var(--ease-out-3);
  }
</style>

<style global>
  [data-theme="light"] {
    & #sun {
      transform: scale(.5);
    }

    & #sun-beams {
      transform: rotateZ(.25turn);
      --_opacity-dur: .5s;
    }
  }

  [data-theme="dark"] {
    & #moon > circle {
      transform: translateX(-20px);
    }

    & #sun-beams {
      opacity: 0;
    }
  }

  [data-theme="light"] {
    color-scheme: light;

    --brand: var(--pink-6);

    --link: var(--indigo-7);
    --link-visited: var(--grape-7);

    --text-1: var(--gray-9);
    --text-2: var(--gray-7);

    --surface-1: var(--gray-0);
    --surface-2: var(--gray-2);
    --surface-3: var(--gray-3);
    --surface-4: var(--gray-4);

    --nav-icon: var(--yellow-5);
    --nav-icon-hover: var(--yellow-6);

    --shadow-color: 220 3% 15%;
    --shadow-strength: 1%;

    @media (--HDcolor) {
      --link: color(display-p3 0 .5 1);
      --link-visited: color(display-p3 .6 .2 1);
    }
  }

  [data-theme="dark"] {
    color-scheme: dark;

    --brand: var(--pink-4);

    --link: var(--indigo-3);
    --link-visited: var(--grape-3);

    --text-1: var(--gray-1);
    --text-2: var(--gray-2);

    --surface-1: var(--gray-9);
    --surface-2: var(--gray-8);
    --surface-3: var(--gray-7);
    --surface-4: var(--gray-6);

    --nav-icon: var(--gray-6);
    --nav-icon-hover: var(--gray-7);

    --shadow-strength: 10%;
    --shadow-color: 220 40% 2%;
  }
</style>

<div class="theme-toggle-container">
  <button class="theme-toggle ga-event" id="theme-toggle" title="Toggles light & dark" aria-live="auto" data-ga-label="theme-toggle">
    <svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24">
      <mask id="moon">
        <rect x="0" y="0" width="100%" height="100%" fill="white" />
        <circle cx="40" cy="8" r="11" fill="black" />
      </mask>
      <!-- https://feathericons.com/?query=sun -->
      <circle id="sun" cx="12" cy="12" r="11" mask="url(#moon)"/>
      <g id="sun-beams">
        <line x1="12" y1="1" x2="12" y2="3" />
        <line x1="12" y1="21" x2="12" y2="23" />
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
        <line x1="1" y1="12" x2="3" y2="12" />
        <line x1="21" y1="12" x2="23" y2="12" />
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
      </g>
    </svg>
  </button>
</div>